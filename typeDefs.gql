
schema {
  query: Query
  mutation: Mutation
}

type Token {
    token: String!
}

type Rhetoric {
    _id: ID
    dateCreated: String!
    active: Boolean!
    slug: String!
    pro: Boolean!
    title: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: User
    approvalCommentary: String
    bulletPoints: [BulletPoint!]!
    resources: [Resource!]!
    opinions: [Opinion!]!
    edits: [Edit!]!
    originalDonation: Donation
    accruedVotes: Float!
}

type BulletPoint {
    _id: ID
    dateCreated: String!
    active: Boolean!
    slug: String!
    pro: Boolean!
    content: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: User
    approvalCommentary: String
    edits: [Edit!]!
    opinions: [Opinion!]!
    originalDonation: Donation
    accruedVotes: Float
}

type Resource {
    _id: ID
    dateCreated: String!
    active: Boolean!
    slug: String!
    pro: Boolean!
    title: String!
    media: String!
    link: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: User
    approvalCommentary: String
    edits: [Edit!]!
    opinions: [Opinion!]!
    originalDonation: Donation
    accruedVotes: Float
}

type Opinion {
    _id: ID
    dateCreated: String!
    createdBy: String!
    slug: String!
    pro: Boolean!
    opinion: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: String
    approvalCommentary: String
    documentID: ID!
    onModel: String!
    originalDonation: Donation!
}

type Edit {
    _id: ID
    dateCreated: String!
    createdBy: String!
    slug: String!
    pro: Boolean!
    oldDocumentID: ID!
    newDocumentID: ID!
    onModel: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: String
    approvalCommentary: String
    originalDonation: Donation!
}

type Donation {
    _id: ID
    dateCreated: String!
    createdBy: String!
    slug: String!
    pro: Boolean!
    amount: Float!
    documentID: ID!
    onModel: String!
    active: Boolean!
    paid: Boolean!
    invoiceID: String!
    invoiceURL: String!
    votingDonation: Boolean
    upVote: Boolean
}

type Certificate {
    _id: ID
    dateCreated: String!
    active: Boolean!
    name: String!
    pro: Boolean!
    originalDonation: Donation!
}

type User {
    _id: ID
    dateCreated: String!
    username: String!@unique
    email: String!@unique
    emailValidated: Boolean!
    active: Boolean!
    password: String!
    allegiance: Boolean
    maximalist: Boolean
    admin: Boolean!
}

type Crypto {
    _id: ID
    ticker: String!
    valueUSD: Float!
}

type Query {
    currentUser: User
    userSpecificActivity: [Donation]

    slugSpecificRhetoric(pro: Boolean!, slug: String!): Rhetoric
    allRhetoric(pro: Boolean!): [Rhetoric]

    slugSpecificAmountDonated(pro: Boolean!, slug: String!): Float
    docSpecificAmountDonated(pro: Boolean!, slug: String!, onModel: String!, documentID: ID!): Float

    allUnapprovedEdits: [Edit]

    allUnapprovedOpinions: [Opinion]
    topLastRandomOpinions(_id: String!, onModel: String!): [Opinion]
    singleOpinion(_id: ID!): Opinion

    cryptoValue(ticker: String!): Float

    donation(pro: Boolean, slug: String): [Donation]
}

type Mutation {
    signinUser(email: String!, password: String!): Token
    signupUser(username: String!, email: String!, password: String!): Boolean
    verifyEmail(token: String!): Token
    resendEmail(email: String!): Boolean
    setUserAllegiance(allegiance: String!): Token

    submitOpinion(amount: String!, documentID: ID!, onModel: String!, opinion: String!): String
    submitVote(onModel: String!, documentID: ID!, amount: Float!, upVote: Boolean!): String

    approveOpinion(_id: ID!, approved: Boolean!, approvalCommentary: String!): Boolean

    submitEditBulletPoint(amount: String!, bulletPointID: ID!, bulletPointContent: String!): String
    submitEditResource(amount: String!, resourceID: ID!, resourceTitle: String!, resourcePath: String!, resourceMedia: String!): String
    addBulletPoint(slug: String!, pro: Boolean!, content: String!): BulletPoint
}