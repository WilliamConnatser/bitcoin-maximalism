schema {
  query: Query
  mutation: Mutation
}

type Token {
    token: String!
}

type Rhetoric {
    _id: ID
    dateCreated: String!
    active: Boolean!
    slug: String!
    pro: Boolean!
    title: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: User
    approvalCommentary: String
    bulletPoints: [BulletPoint!]!
    resources: [Resource!]!
    opinions: [Opinion!]!
    edits: [Edit!]!
    donation: Donation!
}

type BulletPoint {
    _id: ID
    dateCreated: String!
    active: Boolean!
    slug: String!
    pro: Boolean!
    content: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: User
    approvalCommentary: String
    edits: [Edit!]!
    opinions: [Opinion!]!
    donation: Donation!
}

type Resource {
    _id: ID
    dateCreated: String!
    active: Boolean!
    slug: String!
    pro: Boolean!
    title: String!
    media: String!
    link: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: User
    approvalCommentary: String
    edits: [Edit!]!
    opinions: [Opinion!]!
    donation: Donation!
}

type Opinion {
    _id: ID
    dateCreated: String!
    createdBy: String!
    slug: String!
    pro: Boolean!
    opinion: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: String
    approvalCommentary: String
    documentID: ID!
    onModel: String!
    donation: Donation!
}

type Edit {
    _id: ID
    dateCreated: String!
    createdBy: String!
    slug: String!
    pro: Boolean!
    oldDocumentID: ID!
    newDocumentID: ID!
    onModel: String!
    approved: Boolean!
    dateApproved: String
    approvedBy: String
    approvalCommentary: String
    opinions: [Opinion!]!
    donation: Donation!
}

type Donation {
    _id: ID
    dateCreated: String!
    slug: String!
    pro: Boolean!
    amount: Float!
    username: String!
    documentID: ID!
    onModel: String!
    active: Boolean!
    paid: Boolean!
    invoiceID: String!
    invoiceURL: String!
}

type Certificate {
    _id: ID
    dateCreated: String!
    active: Boolean!
    name: String!
    pro: Boolean!
    donation: Donation!
}

type User {
    _id: ID
    dateCreated: String!
    username: String!@unique
    email: String!@unique
    emailValidated: Boolean!
    active: Boolean!
    password: String!
    allegiance: Boolean
    maximalist: Boolean
    admin: Boolean!
    donation: [Donation!]!
}

type Crypto {
    _id: ID
    ticker: String!
    valueUSD: Float!
}

type OpinionResponse {
    top: Opinion
    last: Opinion
    random: Opinion
}

type Query {
    getCurrentUser: User
    getRhetoricByMetaSlugAndSlug(pro: Boolean!, slug: String!): Rhetoric
    getAllApprovedAndActiveProtagonisticRhetoric: [Rhetoric]
    getAllApprovedAndActiveAntagonisticRhetoric: [Rhetoric]
    getAmountDonatedSlugSpecific(pro: Boolean!, slug: String!): Float
    getAmountDonatedModelSpecific(pro: Boolean!, slug: String!, onModel: String!, documentID: ID!): Float
    getUnapprovedOpinions: [Opinion]
    getUnapprovedEdits: [Edit]
    getOpinionsModelSpecific(_id: String!, onModel: String!): OpinionResponse

    getCryptoValue(ticker: String!): Float
    getDonation(pro: Boolean, slug: String): [Donation!]
}

type Mutation {
    setUserAllegiance(allegiance: String!): Token
    signinUser(email: String!, password: String!): Token
    signupUser(username: String!, email: String!, password: String!): Token
    submitOpinionModelSpecific(amount: String!, documentID: ID!, onModel: String!, opinion: String!): String

    approveOpinion(_id: ID!, approved: Boolean!, approvalCommentary: String!): Boolean
    submitEditBulletPoint(amount: String!, bulletPointID: ID!, bulletPointContent: String!): String
    submitEditResource(amount: String!, resourceID: ID!, resourceTitle: String!, resourcePath: String!, resourceMedia: String!): String
    submitVoteSlugSpecific: String
    submitVoteModelSpecific: String

    addBulletPoint(slug: String!, pro: Boolean!, content: String!): BulletPoint
}